# Embedded Ensemble Encoding (EEE)

This repo is for the detailed cell model CA229. It includes the simulation, analysis and plotting files to generate paper figures. The code is in python version 3.6 and using NEURON version 7.4, 7.5, or 7.6.

## Description
    Both synaptic AMPARs/NMDARs and exsynaptic NMDARs are activated by one NetStim.
    Synaptic AMPARs/NMDARs get activated 10~100 ms after the stimulation.
    Exsynaptic NMDARs get activated 15~115 ms after the stimulation.
    gmax for AMPA is 0.05nS; gmax for NMDA is 0.005nS.

## Overview of files:

### Tool files

1. CA229.py   - python class with all the cell membrane properties
        (the Geometry and 3d shape is defined in this python class as well
            --- for better usage in network or NetPyNE)

    The ratio of sodium, calcium, A-type potassium and calcium activated potassium channels can be adjusted by call the class with different ratio parameters. For example,

    Using all the default value in cell1

    ```
    cell1 = CA229()
    ```

    Setting the channel conductances to 50% of the default value in cell2

    ```
    cell2 = CA229(Na_ratio = 0.5, HVA_ratio = 0.5, LVA_ratio = 0.5, KA_ratio = 0.5, BK_ratio = 0.5)               
    ```

2. compile.py     - compile all the mod files in folder: mod

3. analysis_utils.py   - calculating the plateau amplitude, plateau duration, interspike interval and number of spikes of the voltage traces generated by model simulation.

4. utils.py    - to save figures and simulation results in a folder with name of today's date or self-defined folder.

### Simulation files

1. dendrite_experiment.py
   - Trigger a plateau potential in three dendritic sites of choice, and measure their effects.
2. dendrite_experiment_analysis.py
   - Plot voltage traces at the dendritic sites and at the soma.
3. dendrite_experiment_with_inhibition.py
   - Trigger an NMDA mediated plateau potential with varying levels of constant inhibition.
4. dendrite_experiment_with_inhibition.analysis.py
   - Compute the plateau duration and amplitude of the simulation of plateaus under inhibition.
5. dendrite_experiment_with_inhibiton_plot.py
   - Plot the voltage traces of the simulation of the plateau potentials under inhibition.     

### Instruction:

The mode files must be compiled before use: `python compile.py`.

The `dendrite_experiment.py` and `dendrite_experiment_with_inhibition.py` files must be run before analysis and plotting can be done.

## Author

Simulations done by Thomas Burger based of the code of Gao et al.[^1], who in turn based it on the code from [this ModelDB entry](https://senselab.med.yale.edu/ModelDB/ShowModel.cshtml?model=117207&file=/acker_antic/Model/CA%20229.hoc#tabs-2).

[^1]: Gao, P. P. et al. Local glutamate-mediated dendritic plateau potentials change the state of the cortical pyramidal neuron. Journal of Neurophysiology 125, 23â€“42 (2021).